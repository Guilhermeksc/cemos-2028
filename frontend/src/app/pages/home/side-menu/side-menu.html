<div class="flex items-baseline justify-center gap-1 px-2 py-2 pb-1 font-montserrat border-b border-dracula-purple/20 mb-2 sm:py-6 sm:pb-4 max-w-[220px] mx-auto">
  <span class="font-bold text-2xl sm:text-2xl tracking-wider text-dracula-foreground">CEMOS</span>
  <span class="font-medium text-xl sm:text-xl text-dracula-cyan">2028</span>
</div>

<mat-nav-list class="p-0 overflow-y-auto flex-1 sm:px-2 sm:pb-4 max-w-[220px] mx-auto">
  <div class="nav-section" *ngFor="let item of menuItems(); let i = index">
    <!-- Cabeçalho da seção clicável -->
    <div 
      class="nav-section-header flex items-center px-0.5 py-1 cursor-pointer select-none text-dracula-foreground sm:py-1"
      [class.expanded]="item.expanded"
      (click)="toggleSection(i)"
    >
      <mat-icon class="mr-0.5 text-base w-4 h-4 flex-shrink-0">
        {{ item.expanded ? 'expand_less' : 'expand_more' }}
      </mat-icon>
      <mat-icon class="mr-1 text-base w-4 h-4 flex-shrink-0">{{ item.icon }}</mat-icon>
      <span class="text-xs sm:text-xs font-semibold leading-tight tracking-wide uppercase break-words">{{ item.title }}</span>
    </div>

    <!-- Itens da seção (colapsáveis) -->
    <div 
      class="overflow-hidden"
      [@expandCollapse]="item.expanded ? 'expanded' : 'collapsed'"
    >
      <ng-container *ngFor="let child of item.children; let childIndex = index">
        <!-- Se é um objeto com subfilhos (SubMenuItem) -->
        <div *ngIf="typeof child === 'object' && child.children" class="nav-subsection">
          <!-- Cabeçalho da subseção -->
          <div
            class="nav-subsection-header flex items-center px-2 py-0.5 cursor-pointer text-dracula-foreground sm:py-1 sm:min-h-[35px]"
            [class.expanded]="child.expanded || false"
            [class.active]="isItemActive(item.title, child.title)"
            (click)="onSubSectionClick(item.title, child.title, i, childIndex)"
          >
            <mat-icon 
              class="mr-0.5 text-sm w-3 h-3 flex-shrink-0"
            >
              {{ (child.expanded || false) ? 'expand_less' : 'expand_more' }}
            </mat-icon>
            <mat-icon 
              class="mr-1 text-sm w-3 h-3 flex-shrink-0"
            >{{ getItemIcon(child.title) }}</mat-icon>
            <span 
              class="text-xs sm:text-xs font-normal select-none flex-1 break-words"
            >{{ child.title }}</span>
          </div>
          
          <!-- Itens da subseção -->
          <div 
            class="overflow-hidden"
            [@expandCollapse]="(child.expanded || false) ? 'expanded' : 'collapsed'"
          >
            <div
              *ngFor="let subChild of child.children"
              class="nav-subitem flex items-center px-1 py-0.5 pl-6 cursor-pointer text-dracula-foreground/80 sm:py-1"
              [class.active]="isItemActive(item.title, child.title, typeof subChild === 'string' ? subChild : subChild.title)"
              (click)="navigate(item.title, child.title, typeof subChild === 'string' ? subChild : subChild.title)"
            >
              <mat-icon class="mr-1 text-sm w-3 h-3 flex-shrink-0">{{ getItemIcon(typeof subChild === 'string' ? subChild : subChild.title) }}</mat-icon>
              <span class="text-xs sm:text-xs font-normal select-none break-words">{{ typeof subChild === 'string' ? subChild : subChild.title }}</span>
            </div>
          </div>
        </div>
        
        <!-- Se é uma string simples -->
        <div
          *ngIf="typeof child === 'string'"
          class="nav-item-simple flex items-center px-2 py-0.5 cursor-pointer text-dracula-foreground sm:py-1 sm:min-h-[35px]"
          [class.active]="isItemActive(item.title, child)"
          (click)="navigate(item.title, child)"
        >
          <!-- Espaço reservado para o ícone de expansão -->
          <div class="mr-0.5 text-sm w-3 h-3 flex-shrink-0"></div>
          <mat-icon class="mr-1 text-sm w-3 h-3 flex-shrink-0">{{ getItemIcon(child) }}</mat-icon>
          <span class="text-xs sm:text-xs font-normal select-none break-words">{{ child }}</span>
        </div>
        
        <!-- Se é um objeto sem subfilhos -->
        <div
          *ngIf="typeof child === 'object' && !child.children"
          class="nav-item-object flex items-center px-2 py-0.5 cursor-pointer text-dracula-foreground sm:py-1 sm:min-h-[35px]"
          [class.active]="isItemActive(item.title, child.title)"
          (click)="navigate(item.title, child.title)"
        >
          <!-- Espaço reservado para o ícone de expansão -->
          <div class="mr-0.5 text-sm w-3 h-3 flex-shrink-0"></div>
          <mat-icon class="mr-1 text-sm w-3 h-3 flex-shrink-0">{{ getItemIcon(child.title) }}</mat-icon>
          <span class="text-xs sm:text-xs font-normal select-none break-words">{{ child.title }}</span>
        </div>
      </ng-container>
    </div>
  </div>
</mat-nav-list>
