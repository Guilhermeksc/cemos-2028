<div class="conceitos-table-container">
  <!-- Título do componente -->
  <div class="table-header">
    <h3 class="table-title">{{ title }}</h3>
    <span class="items-count" *ngIf="conceitos.length > 0">
      {{ conceitos.length }} {{ conceitos.length === 1 ? 'conceito' : 'conceitos' }}
    </span>
  </div>

  <!-- Mensagem quando não há conceitos -->
  <div class="empty-state" *ngIf="conceitos.length === 0">
    <div class="empty-icon">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
        <polyline points="14,2 14,8 20,8"></polyline>
        <line x1="16" y1="13" x2="8" y2="13"></line>
        <line x1="16" y1="17" x2="8" y2="17"></line>
        <polyline points="10,9 9,9 8,9"></polyline>
      </svg>
    </div>
    <p class="empty-message">{{ emptyMessage }}</p>
  </div>

  <!-- Tabela de conceitos -->
  <div class="table-responsive" *ngIf="conceitos.length > 0">
    <table class="conceitos-table">
      <thead>
        <tr>
          <th class="col-titulo">Título</th>
          <th class="col-descricao">Descrição</th>
          <th class="col-bibliografia" *ngIf="showBibliografia">Bibliografia</th>
          <th class="col-prova">Prova</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let conceito of conceitos; trackBy: trackByConceito" class="conceito-row">
          <!-- Título -->
          <td class="titulo-cell">
            <div class="titulo-content">
              <strong class="titulo-text">{{ conceito.titulo }}</strong>
              <!-- Alerta inline para mobile -->
              <div class="prova-badge mobile-only" 
                   *ngIf="conceito.caiu_em_prova" 
                   [class.with-year]="conceito.ano_prova">
                <svg class="prova-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span>{{ getCaiuEmProvaText(conceito) }}</span>
              </div>
            </div>
          </td>

          <!-- Descrição -->
          <td class="descricao-cell">
            <div class="descricao-content" *ngIf="hasDescricao(conceito)">
              <p class="descricao-text">{{ getTruncatedDescricao(conceito.descricao!, 200) }}</p>
            </div>
            <div class="no-descricao" *ngIf="!hasDescricao(conceito)">
              <span class="text-muted">Sem descrição</span>
            </div>
          </td>

          <!-- Bibliografia -->
          <td class="bibliografia-cell" *ngIf="showBibliografia">
            <div class="bibliografia-content">
              <span class="bibliografia-text" *ngIf="conceito.bibliografia_titulo">
                {{ conceito.bibliografia_titulo }}
              </span>
              <span class="bibliografia-id" *ngIf="!conceito.bibliografia_titulo">
                Bibliografia #{{ conceito.bibliografia }}
              </span>
            </div>
          </td>

          <!-- Status da Prova -->
          <td class="prova-cell">
            <div class="prova-content">
              <!-- Caiu em prova -->
              <div class="prova-badge desktop-only" 
                   *ngIf="conceito.caiu_em_prova" 
                   [class.with-year]="conceito.ano_prova">
                <svg class="prova-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                <span>{{ getCaiuEmProvaText(conceito) }}</span>
              </div>
              
              <!-- Não caiu em prova -->
              <div class="no-prova" *ngIf="!conceito.caiu_em_prova">
                <span class="text-muted">-</span>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>